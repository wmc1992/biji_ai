# 微分方程

## 1、举例求解微分方程

### 1.1 雨滴下落问题

问题：设雨滴下落收到的空气阻力与速度成正比，求初速度为零的雨滴下落速度与时间的函数关系；

分析：根据题目可得出，雨滴受到的重力为：$mg$，雨滴受到的空气阻力为：$f=kv$，雨滴的加速度为：$a=\frac{mg-f}{m}$；

参数说明：

* $m$ 为雨滴的质量；
* $g$ 为重力加速度；
* $f$ 为雨滴收到的空气阻力；
* $v$ 为雨滴的速度；
* $a$ 为雨滴的加速度；
* $k$ 为常数；

同时雨滴的初始速度为零，所以雨滴的速度是关于时间和加速度的函数，只不过在每个时刻，加速度都是不同的（最后的匀速阶段除外，此时加速度恒为零），即 $v=\int_t a \; \text{dt}$，转换成微分形式就是 $a=\frac{dv}{dt}$

解：将分析过程中的 $a=\frac{dv}{dt}$ 代入 $a=\frac{mg-f}{m}$ 就能够得到：

$$\begin{equation}mg - f = m \frac{dv}{dt}\end{equation}$$

该式就是**微分方程**；

对该微分方程进行变换：

$$
\begin{equation}
\begin{split}
mg - f = m \frac{dv}{dt} & \qquad \text{将}dt\text{乘到左侧} \\
(mg - f) \cdot dt = m \cdot dv &\qquad \text{等式两边同时除以}m(mg-f) \\
\frac{1}{m} dt = \frac{1}{mg - f} dv &\qquad \text{将}f=kv\text{代入该式}\\
\frac{1}{m} dt = \frac{1}{mg - kv} dv &\qquad \text{对两边同时求积分}\\
\int \frac{1}{m} dt = \int \frac{1}{mg - kv} dv
\end{split}
\end{equation}
$$

上式的等号左侧求积分是容易的，$\frac{1}{m}$ 是与 $t$ 无关的常数，所以左侧的值为 $\frac{t}{m}$；而等式右侧则需要凑微分，变形如下：

$$
\begin{equation}
\begin{split}
\int \frac{1}{m} dt &= \int \frac{1}{mg - kv} dv\\
\int \frac{1}{m} dt &= -\frac{1}{k}\int \frac{1}{mg - kv} d(mg-kv)\\
\frac{t}{m} + C &= -\frac{1}{k} \cdot \ln(mg-kv) \\
\end{split}
\end{equation}
$$

> 注：对数的微分公式：$\frac{d}{dx}(\ln x)=\frac{1}{x}$

由于题目中是要求速度 $v$ 与时间 $t$ 的函数关系，所以对上述公式对一下变形整理：

$$
\begin{equation}
\begin{split}
\frac{t}{m} + C &= -\frac{1}{k} \cdot \ln(mg-kv) \\
-k (\frac{t}{m} + C) &= \ln(mg-kv) \\
e^{-k (\frac{t}{m} + C)} &= mg-kv \\
v &= \frac{mg}{k} - \frac{1}{k}e^{-k (\frac{t}{m} + C)} \\
v &= \frac{mg}{k} - \frac{1}{k} e^{-kC} e^{-k \frac{t}{m}} \\
v &= \frac{mg}{k} - C_1 \cdot e^{-k \frac{t}{m}} \\
\end{split}
\end{equation}
$$

至此，已经将公式（1）这个微分方程的通解解出来了，在该题目中当$t=0$时：$v=0$；可以利用这个初始条件将常数项 $C_1$ 也解出来，这样就得到了相应的特解，这一步比较简单，这里省略了；

### 1.2 雨滴下落问题中速度与时间的分析

下面结合上述题目中的物理场景，对上述最终解出来的通解进行一下分析；

首先最终求得的通解为：

$$\begin{equation}v = \frac{mg}{k} - C_1 \cdot e^{-k \frac{t}{m}} \end{equation}$$

其中：

* $\frac{mg}{k}$ 是与时间无关的常数，且大于0；
* $C_1 = \frac{1}{k} e^{-kC}$ 是与时间无关的常数，由于 $e^{-kC}$ 大于零，所以 $C_1$ 也大于零；
* $-\frac{k}{m}$ 是与时间无关的常数，且小于零；

另外，容易知道随着 $t$ 的增大，$e^{-\frac{k}{m}t}$ 是逐渐趋于零的；所以随着 $t$ 的增大，$C_1 \cdot e^{-k \frac{t}{m}}$ 是逐渐趋于零的；$v$ 是趋于常数项 $\frac{mg}{k}$ 的；该常数项就是最终匀速运动阶段的速度；

### 1.3 关于微分方程

之前的方程，要求解的变量是一个数；

微分方程，比如上例中，要求解的变量是一个函数；
